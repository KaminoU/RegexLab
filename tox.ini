# Tox configuration for Regex Lab
# Test on Python 3.8 (current ST4) and 3.13 (future ST4)

[tox]
envlist = py38-core, py313-core, lint, typecheck

[testenv]
extras = dev
commands =
    pytest tests/ --cov=src --cov-report=term-missing --cov-report=html

# Core tests only (no UI/Sublime integration tests)
[testenv:py38-core]
description = Test core logic only (no Sublime Text UI - for WSL2/headless)
extras = dev
commands =
    pytest tests/ --cov=src --cov-config=.coveragerc-core --cov-report=term-missing --cov-report=html -m "not integration"

[testenv:py313-core]
description = Test core logic only (no Sublime Text UI - for WSL2/headless)
extras = dev
commands =
    pytest tests/ --cov=src --cov-config=.coveragerc-core --cov-report=term-missing --cov-report=html -m "not integration"

[testenv:lint]
extras = dev
commands =
    ruff check src/ tests/ --diff
    ruff format --check src/

[testenv:typecheck]
extras = dev
commands =
    mypy src/ --ignore-missing-imports
